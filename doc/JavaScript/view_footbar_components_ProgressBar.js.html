

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: view/footbar/components/ProgressBar.js | ManaZeak</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
        
            <link type="text/css" rel="stylesheet" href="./jsDoc.style.css">
        
    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="width: auto; height: 13px">
        
            <a href="https://github.com/Squadella/ManaZeak" rel="noopener noreferrer" target="_blank">
                <img src="https://manazeak.org/static/img/logo/manazeak-text.svg" width="100%" height="100%">
            </a>
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">ManaZeak</a></h1>
        
            <span class="version">v0.1.1</span>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
    <div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="Aside.html">Aside</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Aside_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Aside.html#._events">_events</a></li><li><a href="Aside.html#._init">_init</a></li><li><a href="Aside.html#.hide">hide</a></li><li><a href="Aside.html#.show">show</a></li></ul></div></li><li><a href="AsideEntry.html">AsideEntry</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="AsideEntry_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="AsideEntry.html#._init">_init</a></li></ul></div></li><li><a href="Collection.html">Collection</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Collection_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Collection.html#._buildPlaylist">_buildPlaylist</a></li><li><a href="Collection.html#._initialScan">_initialScan</a></li><li><a href="Collection.html#.buildUserCollection">buildUserCollection</a></li><li><a href="Collection.html#.checkScanStatus">checkScanStatus</a></li><li><a href="Collection.html#.newLibrary">newLibrary</a></li></ul></div></li><li><a href="Errors.html">Errors</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Errors_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Errors.html#._getCallerName">_getCallerName</a></li></ul></div></li><li><a href="Events.html">Events</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Events_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Events.html#.fire">fire</a></li><li><a href="Events.html#.raise">raise</a></li><li><a href="Events.html#.register">register</a></li><li><a href="Events.html#.unregister">unregister</a></li><li><a href="Events.html#.unregisterAll">unregisterAll</a></li></ul></div></li><li><a href="FootBar.html">FootBar</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="FootBar_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="FootBar.html#._events">_events</a></li><li><a href="FootBar.html#._init">_init</a></li><li><a href="FootBar.html#.renderMoodFile">renderMoodFile</a></li><li><a href="FootBar.html#.updatePlayButton">updatePlayButton</a></li></ul></div></li><li><a href="Komunikator.html">Komunikator</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Komunikator_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Komunikator.html#_csrfToken">_csrfToken</a></li><li><a href="Komunikator.html#_headers">_headers</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Komunikator.html#._init">_init</a></li><li><a href="Komunikator.html#.get">get</a></li><li><a href="Komunikator.html#.getBinaryResponse">getBinaryResponse</a></li><li><a href="Komunikator.html#.getTemplate">getTemplate</a></li><li><a href="Komunikator.html#.post">post</a></li></ul></div></li><li><a href="ListView.html">ListView</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ListView_sub"></div></li><li><a href="ListViewEntry.html">ListViewEntry</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ListViewEntry_sub"></div></li><li><a href="Model.html">Model</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Model_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Model.html#._init">_init</a></li><li><a href="Model.html#.adjustProgress">adjustProgress</a></li><li><a href="Model.html#.adjustVolume">adjustVolume</a></li><li><a href="Model.html#.changeTrack">changeTrack</a></li><li><a href="Model.html#.getTrackById">getTrackById</a></li><li><a href="Model.html#.initCollection">initCollection</a></li><li><a href="Model.html#.mute">mute</a></li><li><a href="Model.html#.setProgress">setProgress</a></li><li><a href="Model.html#.setVolume">setVolume</a></li><li><a href="Model.html#.stopPlayback">stopPlayback</a></li><li><a href="Model.html#.toggleMute">toggleMute</a></li><li><a href="Model.html#.togglePlay">togglePlay</a></li><li><a href="Model.html#.unmute">unmute</a></li></ul></div></li><li><a href="Mzk.html">Mzk</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Mzk_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Mzk.html#._initKomunikator">_initKomunikator</a></li><li><a href="Mzk.html#._initLang">_initLang</a></li><li><a href="Mzk.html#._initModel">_initModel</a></li><li><a href="Mzk.html#._initShortcut">_initShortcut</a></li><li><a href="Mzk.html#._initUser">_initUser</a></li><li><a href="Mzk.html#._initView">_initView</a></li><li><a href="Mzk.html#._startApp">_startApp</a></li><li><a href="Mzk.html#.adjustProgress">adjustProgress</a></li><li><a href="Mzk.html#.adjustVolume">adjustVolume</a></li><li><a href="Mzk.html#.changeTrack">changeTrack</a></li><li><a href="Mzk.html#.mute">mute</a></li><li><a href="Mzk.html#.nextTrackInView">nextTrackInView</a></li><li><a href="Mzk.html#.previousTrackInView">previousTrackInView</a></li><li><a href="Mzk.html#.reloadShortcuts">reloadShortcuts</a></li><li><a href="Mzk.html#.setProgress">setProgress</a></li><li><a href="Mzk.html#.setVolume">setVolume</a></li><li><a href="Mzk.html#.start">start</a></li><li><a href="Mzk.html#.stopPlayback">stopPlayback</a></li><li><a href="Mzk.html#.toggleMute">toggleMute</a></li><li><a href="Mzk.html#.togglePlay">togglePlay</a></li><li><a href="Mzk.html#.toggleRepeatMode">toggleRepeatMode</a></li><li><a href="Mzk.html#.trackEnded">trackEnded</a></li><li><a href="Mzk.html#.unmute">unmute</a></li></ul></div></li><li><a href="Notification.html">Notification</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Notification_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Notification.html#._attach">_attach</a></li><li><a href="Notification.html#._buildUI">_buildUI</a></li><li><a href="Notification.html#._checkCounter">_checkCounter</a></li><li><a href="Notification.html#._clearRequestCount">_clearRequestCount</a></li><li><a href="Notification.html#._close">_close</a></li><li><a href="Notification.html#._decrementRequestCounter">_decrementRequestCounter</a></li><li><a href="Notification.html#._dim">_dim</a></li><li><a href="Notification.html#._events">_events</a></li><li><a href="Notification.html#._incrementRequestCounter">_incrementRequestCounter</a></li><li><a href="Notification.html#._init">_init</a></li><li><a href="Notification.html#._open">_open</a></li><li><a href="Notification.html#._resetTimeout">_resetTimeout</a></li><li><a href="Notification.html#._start">_start</a></li><li><a href="Notification.html#._unDim">_unDim</a></li><li><a href="Notification.html#._updateHistory">_updateHistory</a></li><li><a href="Notification.html#.dismiss">dismiss</a></li><li><a href="Notification.html#.dismissAll">dismissAll</a></li><li><a href="Notification.html#.dismissType">dismissType</a></li><li><a href="Notification.html#.error">error</a></li><li><a href="Notification.html#.info">info</a></li><li><a href="Notification.html#.new">new</a></li><li><a href="Notification.html#.success">success</a></li><li><a href="Notification.html#.warning">warning</a></li></ul></div></li><li><a href="Player.html">Player</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Player_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Player.html#._attach">_attach</a></li><li><a href="Player.html#._event">_event</a></li><li><a href="Player.html#._getProgress">_getProgress</a></li><li><a href="Player.html#._init">_init</a></li><li><a href="Player.html#._setProgress">_setProgress</a></li><li><a href="Player.html#._setVolume">_setVolume</a></li><li><a href="Player.html#._trackEnded">_trackEnded</a></li><li><a href="Player.html#.adjustProgress">adjustProgress</a></li><li><a href="Player.html#.adjustVolume">adjustVolume</a></li><li><a href="Player.html#.changeTrack">changeTrack</a></li><li><a href="Player.html#.getSource">getSource</a></li><li><a href="Player.html#.hasSource">hasSource</a></li><li><a href="Player.html#.mute">mute</a></li><li><a href="Player.html#.pause">pause</a></li><li><a href="Player.html#.play">play</a></li><li><a href="Player.html#.repeatTrack">repeatTrack</a></li><li><a href="Player.html#.stop">stop</a></li><li><a href="Player.html#.toggleMute">toggleMute</a></li><li><a href="Player.html#.togglePlay">togglePlay</a></li><li><a href="Player.html#.unmute">unmute</a></li></ul></div></li><li><a href="Playlist.html">Playlist</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Playlist_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Playlist.html#._convertRawArtists">_convertRawArtists</a></li><li><a href="Playlist.html#._getArtistsLazyLoad">_getArtistsLazyLoad</a></li><li><a href="Playlist.html#.getArtistsFromServer">getArtistsFromServer</a></li></ul></div></li><li><a href="ProgressBar.html">ProgressBar</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ProgressBar_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ProgressBar.html#._addEvents">_addEvents</a></li><li><a href="ProgressBar.html#._animate">_animate</a></li><li><a href="ProgressBar.html#._init">_init</a></li><li><a href="ProgressBar.html#._mouseDown">_mouseDown</a></li><li><a href="ProgressBar.html#._mouseMove">_mouseMove</a></li><li><a href="ProgressBar.html#._mouseUp">_mouseUp</a></li><li><a href="ProgressBar.html#._moveProgress">_moveProgress</a></li><li><a href="ProgressBar.html#._removeEvents">_removeEvents</a></li><li><a href="ProgressBar.html#._resetTimecode">_resetTimecode</a></li><li><a href="ProgressBar.html#._startAnimation">_startAnimation</a></li><li><a href="ProgressBar.html#._stopAnimation">_stopAnimation</a></li><li><a href="ProgressBar.html#._updateHoverTimecode">_updateHoverTimecode</a></li><li><a href="ProgressBar.html#._updateMouseOver">_updateMouseOver</a></li><li><a href="ProgressBar.html#.activate">activate</a></li><li><a href="ProgressBar.html#.activateTransitions">activateTransitions</a></li><li><a href="ProgressBar.html#.adjustProgress">adjustProgress</a></li><li><a href="ProgressBar.html#.desactivate">desactivate</a></li><li><a href="ProgressBar.html#.desactivateTransitions">desactivateTransitions</a></li><li><a href="ProgressBar.html#.resetProgressBar">resetProgressBar</a></li><li><a href="ProgressBar.html#.setProgress">setProgress</a></li><li><a href="ProgressBar.html#.setVisibility">setVisibility</a></li><li><a href="ProgressBar.html#.toggleActive">toggleActive</a></li><li><a href="ProgressBar.html#.updateDuration">updateDuration</a></li></ul></div></li><li><a href="Scene.html">Scene</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Scene_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Scene.html#.addView">addView</a></li><li><a href="Scene.html#.updateView">updateView</a></li></ul></div></li><li><a href="ScrollBar.html">ScrollBar</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ScrollBar_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ScrollBar.html#._barClicked">_barClicked</a></li><li><a href="ScrollBar.html#._drag">_drag</a></li><li><a href="ScrollBar.html#._events">_events</a></li><li><a href="ScrollBar.html#._init">_init</a></li><li><a href="ScrollBar.html#._stopDrag">_stopDrag</a></li><li><a href="ScrollBar.html#._updateScrollBar">_updateScrollBar</a></li></ul></div></li><li><a href="Shortcut.html">Shortcut</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Shortcut_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Shortcut.html#._addEvents">_addEvents</a></li><li><a href="Shortcut.html#._getModifiersCount">_getModifiersCount</a></li><li><a href="Shortcut.html#._removeEvents">_removeEvents</a></li><li><a href="Shortcut.html#._setAllPauseFlag">_setAllPauseFlag</a></li><li><a href="Shortcut.html#._setOnePauseFlag">_setOnePauseFlag</a></li><li><a href="Shortcut.html#._testShortcuts">_testShortcuts</a></li><li><a href="Shortcut.html#.pause">pause</a></li><li><a href="Shortcut.html#.pauseAll">pauseAll</a></li><li><a href="Shortcut.html#.register">register</a></li><li><a href="Shortcut.html#.resume">resume</a></li><li><a href="Shortcut.html#.resumeAll">resumeAll</a></li><li><a href="Shortcut.html#.unregister">unregister</a></li><li><a href="Shortcut.html#.unregisterAll">unregisterAll</a></li></ul></div></li><li><a href="TopBar.html">TopBar</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="TopBar_sub"></div></li><li><a href="Track.html">Track</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Track_sub"></div></li><li><a href="User.html">User</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="User_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="User.html#_godfatherCode">_godfatherCode</a></li><li><a href="User.html#_godfatherName">_godfatherName</a></li><li><a href="User.html#_groupId">_groupId</a></li><li><a href="User.html#_groupName">_groupName</a></li><li><a href="User.html#_id">_id</a></li><li><a href="User.html#_inviteCode">_inviteCode</a></li><li><a href="User.html#_isAdmin">_isAdmin</a></li><li><a href="User.html#_permissions">_permissions</a></li><li><a href="User.html#_username">_username</a></li><li><a href="User.html#godfatherName">godfatherName</a></li><li><a href="User.html#id">id</a></li><li><a href="User.html#username">username</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="User.html#.hasPermission">hasPermission</a></li><li><a href="User.html#.setMembers">setMembers</a></li></ul></div></li><li><a href="UserMenu.html">UserMenu</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="UserMenu_sub"></div></li><li><a href="Utils.html">Utils</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Utils_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Utils.html#._prototypes">_prototypes</a></li><li><a href="Utils.html#.getCookies">getCookies</a></li><li><a href="Utils.html#.idGenerator">idGenerator</a></li><li><a href="Utils.html#.precisionRound">precisionRound</a></li><li><a href="Utils.html#.secondsToTimecode">secondsToTimecode</a></li></ul></div></li><li><a href="View.html">View</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="View_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="View.html#._init">_init</a></li><li><a href="View.html#.addOverlay">addOverlay</a></li><li><a href="View.html#.changeTrack">changeTrack</a></li><li><a href="View.html#.initPlaylist">initPlaylist</a></li><li><a href="View.html#.stopPlayback">stopPlayback</a></li><li><a href="View.html#.togglePlay">togglePlay</a></li><li><a href="View.html#.updateProgress">updateProgress</a></li><li><a href="View.html#.updateVolume">updateVolume</a></li></ul></div></li><li><a href="VolumeBar.html">VolumeBar</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="VolumeBar_sub"></div></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use_strict';


class ProgressBar {
  /**
   * @summary Interactive Progress Bar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Handle the progress over a track
   **/
  constructor() {
    this._progress = {
      container: {},
      track: {},
      current: {},
      thumb: {},
      hover: {},
      moodbar: {},
      left: {},
      right: {}
    }; // DOM elements
    this._topbarLogo = {};
    this._rafId = null;
    this._duration = 0;

    this._isActive = false; // Boolean flag to make listeners available/unavailable
    this._isMouseOver = false;
    this._isDragging = false;

    this._init();
  }

  //  ----  PRIVATE METHODS  ----  //

  /**
   * @method
   * @name _init
   * @private
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Init the progress bar dom and events
   **/
  _init() {
    this._progress.container = document.getElementById('progress-container');
    this._progress.track = document.getElementById('progress-track');
    this._progress.current = document.getElementById('progress-current');
    this._progress.thumb = document.getElementById('progress-thumb');
    this._progress.hover = document.getElementById('progress-hover');
    this._progress.moodbar = document.getElementById('progress-moodbar');
    this._progress.left = document.getElementById('footbar-left');
    this._progress.right = document.getElementById('footbar-right');
    this._topbarLogo = document.getElementById('topbar-logo');

    this._resetTimecode();

    // In order to remove event listeners in _removeEvents()
    this._mouseDown = this._mouseDown.bind(this);
    this._mouseMove = this._mouseMove.bind(this);
    this._mouseUp = this._mouseUp.bind(this);
    this._updateMouseOver = this._updateMouseOver.bind(this);
  }

  /**
   * @method
   * @name _addEvents
   * @private
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Listen to mouse events when ProgressBar is activated
   **/
  _addEvents() {
    this._progress.container.addEventListener('mousedown', this._mouseDown);
    this._progress.container.addEventListener('mouseover', this._updateMouseOver);
    this._progress.container.addEventListener('mouseleave', this._updateMouseOver);
    window.addEventListener('mousemove', this._mouseMove);
    window.addEventListener('mouseup', this._mouseUp);
  }

  /**
   * @method
   * @name _removeEvents
   * @private
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Remove mouse events when ProgressBar is desactivated
   **/
  _removeEvents() {
    this._progress.container.removeEventListener('mousedown', this._mouseDown);
    this._progress.container.removeEventListener('mouseover', this._updateMouseOver);
    this._progress.container.removeEventListener('mouseleave', this._updateMouseOver);
    window.removeEventListener('mousemove', this._mouseMove);
    window.removeEventListener('mouseup', this._mouseUp);
  }

  /**
   * @method
   * @name _updateMouseOver
   * @private
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Handle mouse hover on progress bar
   * @param {object} event - The mouse event object
   **/
  _updateMouseOver(event) {
    if (event.type === 'mouseover') {
      this._progress.hover.style.opacity = '1'; // Automatic CSS transition
      this._isMouseOver = true;
    } else if (event.type === 'mouseleave') {
      this._progress.hover.style.opacity = '0'; // Automatic CSS transition
      this._isMouseOver = false;
    }
  }

  /**
   * @method
   * @name _updateHoverTimecode
   * @private
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Update the hover timecode value
   * @param {number} xPos - The mouse X position on screen
   **/
  _updateHoverTimecode(xPos) {
    const boundRect = this._progress.track.getBoundingClientRect();
    let percentage = ((xPos - boundRect.left) * 100) / boundRect.width;

    if (percentage > 100) {
      percentage = 100;
    }
    if (percentage &lt; 0) {
      percentage = 0;
    }

    this._progress.hover.style.left = `${((((boundRect.width * percentage) / 100) - 30) * 100) / boundRect.width}%`;
    this._progress.hover.innerHTML = Utils.secondsToTimecode((percentage * this._duration) / 100);
  }

  /**
   * @method
   * @name _mouseDown
   * @private
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Handle the mouse down event
   * @param {object} event - The mouse event object
   **/
  _mouseDown(event) {
    if (!this._isDragging &amp;&amp;
      (event.target.id === 'progress-container' ||
        event.target.id === 'progress-track' ||
        event.target.id === 'progress-current' ||
        event.target.id === 'progress-moodbar' ||
        event.target.id === 'progress-thumb' ||
        event.target.id === 'moodbarThumb' ||
        event.target.tagName === 'rect')) {

      mzk.mute();
      this._isDragging = true;
      this._stopAnimation();
      this._moveProgress(event.clientX);
    }
  }

  /**
   * @method
   * @name _mouseUp
   * @private
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Handle the mouse up event
   * @param {object} event - The mouse event object
   **/
  _mouseUp(event) {
    if (this._isDragging) { // User has released progress thumb
      mzk.unmute();
      this._isDragging = false;
      this._startAnimation();
      this._moveProgress(event.clientX);
    }
  }

  /**
   * @method
   * @name _mouseMove
   * @private
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Handle the mouse move event
   * @param {object} event - The mouse event object
   **/
  _mouseMove(event) {
    if (this._isActive &amp;&amp; this._isDragging) { // User is draging progress thumb
      this._moveProgress(event.clientX);
    } else if (this._isActive &amp;&amp; this._isMouseOver) { // Hover on progress track
      this._updateHoverTimecode(event.clientX);
    }
  }

  /**
   * @method
   * @name _moveProgress
   * @private
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Move the progress along its track
   * @param {number} xPos - The mouse X position on screen
   **/
  _moveProgress(xPos) {
    const boundRect = this._progress.track.getBoundingClientRect();
    let distance = ((xPos - boundRect.left) * 100) / boundRect.width;

    if (distance &lt; 0) {
      distance = 0;
    }
    if (distance > 100) {
      distance = 100;
    }

    mzk.setProgress(Utils.precisionRound(distance, 3));
  }

  /**
   * @method
   * @name _animate
   * @private
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Set the progress bar completion according to the Mzk player progress value
   **/
  _animate() {
    this.setProgress(mzk.getProgress());
  }

  /**
   * @method
   * @name _startAnimation
   * @private
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Use RequestAnimationFrame to render and setProgress most of the frames
   **/
  _startAnimation() {
    if (this._isActive) {
      this._animate();
      this._rafId = requestAnimationFrame(this._startAnimation.bind(this));
    }
  }

  /**
   * @method
   * @name _stopAnimation
   * @private
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Cancel animation frame if needed
   **/
  _stopAnimation() {
    if (!this._isActive) {
      cancelAnimationFrame(this._rafId);
    }
  }

  /**
   * @method
   * @name _resetTimecode
   * @private
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Set UI values to default `--:--`
   **/
  _resetTimecode() {
    setTimeout(function() {
      this._progress.left.innerHTML = '--:--';
      this._progress.right.innerHTML = '--:--';
      this._progress.hover.innerHTML = '--:--';
    }.bind(this), 500); // Match value with the one in scss/view/components/_progresbar.scss -> $footbar-transition
  }

  //  --------------------------------  PUBLIC METHODS  ---------------------------------  //

  /**
   * @method
   * @name resetProgressBar
   * @public
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Reset the progress bar to its initial state and desactivate its events and transitions
   **/
  resetProgressBar() {
    this.setProgress(0);
    this.desactivate();
  }

  /**
   * @method
   * @name activateTransitions
   * @public
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Enable the transition on the ProgressBar
   **/
  activateTransitions() {
    this._progress.thumb.style.transition = 'left 0.4s ease 0s, opacity 0.4s ease 0s'; // Match transition duration w/ the one in view/_footbar.scss ($footbar-transition)
    this._progress.current.style.transition = 'width 0.4s ease 0s'; // Match transition duration w/ the one in view/_footbar.scss ($footbar-transition)
  }

  /**
   * @method
   * @name desactivateTransitions
   * @public
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Disable the transition on the ProgressBar
   **/
  desactivateTransitions() {
    // Here we need to set transition value to 0s to avoid lag on current and thumb when progress bar is active
    // Lag duration will be equal to the transition time otherwise
    // Reset left and width transition to default, match transition duration w/ the one in view/_footbar.scss ($footbar-transition)
    this._progress.thumb.style.transition = 'left 0s ease 0s, opacity 0.4s ease 0s';
    this._progress.current.style.transition = 'width 0s ease 0s';
  }

  /**
   * @method
   * @name toggleActive
   * @public
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Toggle the ProgressBar active status
   **/
  toggleActive() {
    if (!this._isActive) {
      this.activate();
    } else {
      this.desactivate();
    }
  }

  /**
   * @method
   * @name activate
   * @public
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Activate the ProgressBar, set it visible, add animations and add mouse events
   **/
  activate() {
    this._isActive = true;
    this.setVisibility(true);
    this._startAnimation();
    this.activateTransitions(); // TODO : add transition in startAnimation
    this._addEvents();
  }

  /**
   * @method
   * @name desactivate
   * @public
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Desactivate the ProgressBar, set it invisible, remove animations and remove mouse events
   **/
  desactivate() {
    this._isActive = false;
    this.setVisibility(false);
    this._resetTimecode();
    this._removeEvents();
    this._stopAnimation();

    setTimeout(function() { // Delay no animation style for thumb and current (both come at 0% in 0.5s interval)
      this.desactivateTransitions();
    }.bind(this), 500); // Use same timeout value as the transition value set in resetProgressBar(), so animation can run properly
  }

  /**
   * @method
   * @name adjustProgress
   * @public
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Add/Substract a completion percentage to the ProgressBar
   * @param {number} amount - The percentage amount to add/substract in range float[-100,100]
   **/
  adjustProgress(amount) {
    this.setProgress(0 + amount);
  }

  /**
   * @method
   * @name updateDuration
   * @public
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Update the duration values
   * @param {number} duration - The track duration in seconds
   **/
  updateDuration(duration) {
    this._duration = duration;
    this._progress.right.innerHTML = Utils.secondsToTimecode(duration);
  }

  /**
   * @method
   * @name setProgress
   * @public
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Set the completion percentage of the ProgressBar
   * @param {number} percentage - The progress percentage to set
   **/
  setProgress(percentage) {
    if (this._isActive) {
      this._progress.current.style.width = `${percentage}%`;
      this._progress.thumb.style.left = `${percentage}%`;
      this._progress.left.innerHTML = Utils.secondsToTimecode((percentage * this._duration) / 100);
    }
  }

  /**
   * @method
   * @name setVisibility
   * @public
   * @memberof ProgressBar
   * @author Arthur Beaulieu
   * @since August 2018
   * @description Set the visibility status of the ProgressBar
   * @param {boolean} isVisible - The visibility state
   **/
  setVisibility(isVisible) {
    if (isVisible) {
      this._progress.moodbar.style.height = '25px'; // Match value w/ the one in view/components/_progresbar.scss ($progress-moodbar-height)
      this._progress.moodbar.style.opacity = '1';
      this._progress.moodbar.style.cursor = 'pointer';
      this._progress.track.style.opacity = '1';
      this._progress.track.style.cursor = 'pointer';
      this._progress.thumb.style.opacity = '1';
      this._progress.left.style.opacity = '1';
      this._progress.right.style.opacity = '1';
      this._topbarLogo.style.opacity = '1';
    } else {
      this._progress.moodbar.style.height = '0';
      this._progress.moodbar.style.opacity = '0';
      this._progress.moodbar.style.cursor = 'default';
      this._progress.track.style.opacity = '0';
      this._progress.track.style.cursor = 'default';
      this._progress.thumb.style.opacity = '0';
      this._progress.left.style.opacity = '0';
      this._progress.right.style.opacity = '0';
      this._topbarLogo.style.opacity = '0';
    }
  }

  //  ----  GETTER METHODS   ----  //

  getMoodbarContainer() {
    return this._progress.moodbar;
  }


  //  ----  SETTER METHODS   ----  //

  setIsActive(isActive) {
    this._isActive = isActive;
  }
  setIsMouseOver(isMouseOver) {
    this._isMouseOver = isMouseOver;
  }
  setIsDragging(isDragging) {
    this._isDragging = isDragging;
  }
}

export default ProgressBar;
</code></pre>
        </article>
    </section>




</div>

<footer>
    <img class="logo" src="https://manazeak.org/static/img/logo/manazeak-text.svg" style="width: auto; height: 13px">
    <div class="footer-text">&nbsp;&nbsp;ManaZeak is love</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = '_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>
