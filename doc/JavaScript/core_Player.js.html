

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: core/Player.js | ManaZeak</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
        
            <link type="text/css" rel="stylesheet" href="./jsDoc.style.css">
        
    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="width: auto; height: 13px">
        
            <a href="https://github.com/Squadella/ManaZeak" rel="noopener noreferrer" target="_blank">
                <img src="https://manazeak.org/static/img/logo/manazeak-text.svg" width="100%" height="100%">
            </a>
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">ManaZeak</a></h1>
        
            <span class="version">v0.1.1</span>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
    <div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="Aside.html">Aside</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Aside_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Aside.html#._events">_events</a></li><li><a href="Aside.html#._init">_init</a></li><li><a href="Aside.html#.hide">hide</a></li><li><a href="Aside.html#.show">show</a></li></ul></div></li><li><a href="AsideEntry.html">AsideEntry</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="AsideEntry_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="AsideEntry.html#._init">_init</a></li></ul></div></li><li><a href="Collection.html">Collection</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Collection_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Collection.html#._buildPlaylist">_buildPlaylist</a></li><li><a href="Collection.html#._initialScan">_initialScan</a></li><li><a href="Collection.html#.buildUserCollection">buildUserCollection</a></li><li><a href="Collection.html#.checkScanStatus">checkScanStatus</a></li><li><a href="Collection.html#.newLibrary">newLibrary</a></li></ul></div></li><li><a href="Errors.html">Errors</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Errors_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Errors.html#._getCallerName">_getCallerName</a></li></ul></div></li><li><a href="Events.html">Events</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Events_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Events.html#.fire">fire</a></li><li><a href="Events.html#.raise">raise</a></li><li><a href="Events.html#.register">register</a></li><li><a href="Events.html#.unregister">unregister</a></li><li><a href="Events.html#.unregisterAll">unregisterAll</a></li></ul></div></li><li><a href="FootBar.html">FootBar</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="FootBar_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="FootBar.html#._events">_events</a></li><li><a href="FootBar.html#._init">_init</a></li><li><a href="FootBar.html#.renderMoodFile">renderMoodFile</a></li><li><a href="FootBar.html#.updatePlayButton">updatePlayButton</a></li></ul></div></li><li><a href="Komunikator.html">Komunikator</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Komunikator_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Komunikator.html#_csrfToken">_csrfToken</a></li><li><a href="Komunikator.html#_headers">_headers</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Komunikator.html#._init">_init</a></li><li><a href="Komunikator.html#.get">get</a></li><li><a href="Komunikator.html#.getBinaryResponse">getBinaryResponse</a></li><li><a href="Komunikator.html#.getTemplate">getTemplate</a></li><li><a href="Komunikator.html#.post">post</a></li></ul></div></li><li><a href="ListView.html">ListView</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ListView_sub"></div></li><li><a href="ListViewEntry.html">ListViewEntry</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ListViewEntry_sub"></div></li><li><a href="Model.html">Model</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Model_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Model.html#._init">_init</a></li><li><a href="Model.html#.adjustProgress">adjustProgress</a></li><li><a href="Model.html#.adjustVolume">adjustVolume</a></li><li><a href="Model.html#.changeTrack">changeTrack</a></li><li><a href="Model.html#.getTrackById">getTrackById</a></li><li><a href="Model.html#.initCollection">initCollection</a></li><li><a href="Model.html#.mute">mute</a></li><li><a href="Model.html#.setProgress">setProgress</a></li><li><a href="Model.html#.setVolume">setVolume</a></li><li><a href="Model.html#.stopPlayback">stopPlayback</a></li><li><a href="Model.html#.toggleMute">toggleMute</a></li><li><a href="Model.html#.togglePlay">togglePlay</a></li><li><a href="Model.html#.unmute">unmute</a></li></ul></div></li><li><a href="Mzk.html">Mzk</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Mzk_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Mzk.html#._initKomunikator">_initKomunikator</a></li><li><a href="Mzk.html#._initLang">_initLang</a></li><li><a href="Mzk.html#._initModel">_initModel</a></li><li><a href="Mzk.html#._initShortcut">_initShortcut</a></li><li><a href="Mzk.html#._initUser">_initUser</a></li><li><a href="Mzk.html#._initView">_initView</a></li><li><a href="Mzk.html#._startApp">_startApp</a></li><li><a href="Mzk.html#.adjustProgress">adjustProgress</a></li><li><a href="Mzk.html#.adjustVolume">adjustVolume</a></li><li><a href="Mzk.html#.changeTrack">changeTrack</a></li><li><a href="Mzk.html#.mute">mute</a></li><li><a href="Mzk.html#.nextTrackInView">nextTrackInView</a></li><li><a href="Mzk.html#.previousTrackInView">previousTrackInView</a></li><li><a href="Mzk.html#.reloadShortcuts">reloadShortcuts</a></li><li><a href="Mzk.html#.setProgress">setProgress</a></li><li><a href="Mzk.html#.setVolume">setVolume</a></li><li><a href="Mzk.html#.start">start</a></li><li><a href="Mzk.html#.stopPlayback">stopPlayback</a></li><li><a href="Mzk.html#.toggleMute">toggleMute</a></li><li><a href="Mzk.html#.togglePlay">togglePlay</a></li><li><a href="Mzk.html#.toggleRepeatMode">toggleRepeatMode</a></li><li><a href="Mzk.html#.trackEnded">trackEnded</a></li><li><a href="Mzk.html#.unmute">unmute</a></li></ul></div></li><li><a href="Notification.html">Notification</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Notification_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Notification.html#._attach">_attach</a></li><li><a href="Notification.html#._buildUI">_buildUI</a></li><li><a href="Notification.html#._checkCounter">_checkCounter</a></li><li><a href="Notification.html#._clearRequestCount">_clearRequestCount</a></li><li><a href="Notification.html#._close">_close</a></li><li><a href="Notification.html#._decrementRequestCounter">_decrementRequestCounter</a></li><li><a href="Notification.html#._dim">_dim</a></li><li><a href="Notification.html#._events">_events</a></li><li><a href="Notification.html#._incrementRequestCounter">_incrementRequestCounter</a></li><li><a href="Notification.html#._init">_init</a></li><li><a href="Notification.html#._open">_open</a></li><li><a href="Notification.html#._resetTimeout">_resetTimeout</a></li><li><a href="Notification.html#._start">_start</a></li><li><a href="Notification.html#._unDim">_unDim</a></li><li><a href="Notification.html#._updateHistory">_updateHistory</a></li><li><a href="Notification.html#.dismiss">dismiss</a></li><li><a href="Notification.html#.dismissAll">dismissAll</a></li><li><a href="Notification.html#.dismissType">dismissType</a></li><li><a href="Notification.html#.error">error</a></li><li><a href="Notification.html#.info">info</a></li><li><a href="Notification.html#.new">new</a></li><li><a href="Notification.html#.success">success</a></li><li><a href="Notification.html#.warning">warning</a></li></ul></div></li><li><a href="Player.html">Player</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Player_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Player.html#._attach">_attach</a></li><li><a href="Player.html#._event">_event</a></li><li><a href="Player.html#._getProgress">_getProgress</a></li><li><a href="Player.html#._init">_init</a></li><li><a href="Player.html#._setProgress">_setProgress</a></li><li><a href="Player.html#._setVolume">_setVolume</a></li><li><a href="Player.html#._trackEnded">_trackEnded</a></li><li><a href="Player.html#.adjustProgress">adjustProgress</a></li><li><a href="Player.html#.adjustVolume">adjustVolume</a></li><li><a href="Player.html#.changeTrack">changeTrack</a></li><li><a href="Player.html#.getSource">getSource</a></li><li><a href="Player.html#.hasSource">hasSource</a></li><li><a href="Player.html#.mute">mute</a></li><li><a href="Player.html#.pause">pause</a></li><li><a href="Player.html#.play">play</a></li><li><a href="Player.html#.repeatTrack">repeatTrack</a></li><li><a href="Player.html#.stop">stop</a></li><li><a href="Player.html#.toggleMute">toggleMute</a></li><li><a href="Player.html#.togglePlay">togglePlay</a></li><li><a href="Player.html#.unmute">unmute</a></li></ul></div></li><li><a href="Playlist.html">Playlist</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Playlist_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Playlist.html#._convertRawArtists">_convertRawArtists</a></li><li><a href="Playlist.html#._getArtistsLazyLoad">_getArtistsLazyLoad</a></li><li><a href="Playlist.html#.getArtistsFromServer">getArtistsFromServer</a></li></ul></div></li><li><a href="ProgressBar.html">ProgressBar</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ProgressBar_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ProgressBar.html#._addEvents">_addEvents</a></li><li><a href="ProgressBar.html#._animate">_animate</a></li><li><a href="ProgressBar.html#._init">_init</a></li><li><a href="ProgressBar.html#._mouseDown">_mouseDown</a></li><li><a href="ProgressBar.html#._mouseMove">_mouseMove</a></li><li><a href="ProgressBar.html#._mouseUp">_mouseUp</a></li><li><a href="ProgressBar.html#._moveProgress">_moveProgress</a></li><li><a href="ProgressBar.html#._removeEvents">_removeEvents</a></li><li><a href="ProgressBar.html#._resetTimecode">_resetTimecode</a></li><li><a href="ProgressBar.html#._startAnimation">_startAnimation</a></li><li><a href="ProgressBar.html#._stopAnimation">_stopAnimation</a></li><li><a href="ProgressBar.html#._updateHoverTimecode">_updateHoverTimecode</a></li><li><a href="ProgressBar.html#._updateMouseOver">_updateMouseOver</a></li><li><a href="ProgressBar.html#.activate">activate</a></li><li><a href="ProgressBar.html#.activateTransitions">activateTransitions</a></li><li><a href="ProgressBar.html#.adjustProgress">adjustProgress</a></li><li><a href="ProgressBar.html#.desactivate">desactivate</a></li><li><a href="ProgressBar.html#.desactivateTransitions">desactivateTransitions</a></li><li><a href="ProgressBar.html#.resetProgressBar">resetProgressBar</a></li><li><a href="ProgressBar.html#.setProgress">setProgress</a></li><li><a href="ProgressBar.html#.setVisibility">setVisibility</a></li><li><a href="ProgressBar.html#.toggleActive">toggleActive</a></li><li><a href="ProgressBar.html#.updateDuration">updateDuration</a></li></ul></div></li><li><a href="Scene.html">Scene</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Scene_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Scene.html#.addView">addView</a></li><li><a href="Scene.html#.updateView">updateView</a></li></ul></div></li><li><a href="ScrollBar.html">ScrollBar</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ScrollBar_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ScrollBar.html#._barClicked">_barClicked</a></li><li><a href="ScrollBar.html#._drag">_drag</a></li><li><a href="ScrollBar.html#._events">_events</a></li><li><a href="ScrollBar.html#._init">_init</a></li><li><a href="ScrollBar.html#._stopDrag">_stopDrag</a></li><li><a href="ScrollBar.html#._updateScrollBar">_updateScrollBar</a></li></ul></div></li><li><a href="Shortcut.html">Shortcut</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Shortcut_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Shortcut.html#._addEvents">_addEvents</a></li><li><a href="Shortcut.html#._getModifiersCount">_getModifiersCount</a></li><li><a href="Shortcut.html#._removeEvents">_removeEvents</a></li><li><a href="Shortcut.html#._setAllPauseFlag">_setAllPauseFlag</a></li><li><a href="Shortcut.html#._setOnePauseFlag">_setOnePauseFlag</a></li><li><a href="Shortcut.html#._testShortcuts">_testShortcuts</a></li><li><a href="Shortcut.html#.pause">pause</a></li><li><a href="Shortcut.html#.pauseAll">pauseAll</a></li><li><a href="Shortcut.html#.register">register</a></li><li><a href="Shortcut.html#.resume">resume</a></li><li><a href="Shortcut.html#.resumeAll">resumeAll</a></li><li><a href="Shortcut.html#.unregister">unregister</a></li><li><a href="Shortcut.html#.unregisterAll">unregisterAll</a></li></ul></div></li><li><a href="TopBar.html">TopBar</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="TopBar_sub"></div></li><li><a href="Track.html">Track</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Track_sub"></div></li><li><a href="User.html">User</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="User_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="User.html#_godfatherCode">_godfatherCode</a></li><li><a href="User.html#_godfatherName">_godfatherName</a></li><li><a href="User.html#_groupId">_groupId</a></li><li><a href="User.html#_groupName">_groupName</a></li><li><a href="User.html#_id">_id</a></li><li><a href="User.html#_inviteCode">_inviteCode</a></li><li><a href="User.html#_isAdmin">_isAdmin</a></li><li><a href="User.html#_permissions">_permissions</a></li><li><a href="User.html#_username">_username</a></li><li><a href="User.html#godfatherName">godfatherName</a></li><li><a href="User.html#id">id</a></li><li><a href="User.html#username">username</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="User.html#.hasPermission">hasPermission</a></li><li><a href="User.html#.setMembers">setMembers</a></li></ul></div></li><li><a href="UserMenu.html">UserMenu</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="UserMenu_sub"></div></li><li><a href="Utils.html">Utils</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Utils_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Utils.html#._prototypes">_prototypes</a></li><li><a href="Utils.html#.getCookies">getCookies</a></li><li><a href="Utils.html#.idGenerator">idGenerator</a></li><li><a href="Utils.html#.precisionRound">precisionRound</a></li><li><a href="Utils.html#.secondsToTimecode">secondsToTimecode</a></li></ul></div></li><li><a href="View.html">View</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="View_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="View.html#._init">_init</a></li><li><a href="View.html#.addOverlay">addOverlay</a></li><li><a href="View.html#.changeTrack">changeTrack</a></li><li><a href="View.html#.initPlaylist">initPlaylist</a></li><li><a href="View.html#.stopPlayback">stopPlayback</a></li><li><a href="View.html#.togglePlay">togglePlay</a></li><li><a href="View.html#.updateProgress">updateProgress</a></li><li><a href="View.html#.updateVolume">updateVolume</a></li></ul></div></li><li><a href="VolumeBar.html">VolumeBar</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="VolumeBar_sub"></div></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use_strict';


class Player {


  /**
   * @summary Basic audio HTML music player
   * @author Arthur Beaulieu
   * @since July 2018
   * @description Provide a few features to control a playback. Should be handled in a controller
   **/
  constructor() {
    this._player = {}; // HTML audio player
    this._volume = 0.0; // Volume in range [0, 1] float
    this._isMuted = false; // Mute flag
    this._isPlaying = false; // Playback flag

    this._init(); // Init player object
    this._events(); // Listen to events
    this._attach(); // Attach HTML audio tag to the DOM
  }


  //  ----  PRIVATE METHODS  ----  //


  /**
   * @method
   * @name _init
   * @private
   * @memberof Player
   * @author Arthur Beaulieu
   * @since July 2018
   * @description Build player tag and set loop/volume values
   **/
  _init() {
    this._player = document.createElement('AUDIO'); // Create HTML audio tag
    this._player.id = 'mzk-audio-player'; // Assign player ID
    this.setVolume(1); // Initialize volume to its maximum value, prefs
  }


  /**
   * @method
   * @name _event
   * @private
   * @memberof Player
   * @author Arthur Beaulieu
   * @since July 2018
   * @description Listen to ended track event on audio player
   **/
  _events() {
    this._player.addEventListener('ended', this._trackEnded.bind(this)); // Handle track end playback event
  }


  /**
   * @method
   * @name _attach
   * @private
   * @memberof Player
   * @author Arthur Beaulieu
   * @since July 2018
   * @description Append audio player to the DOM using a fragment
   **/
  _attach() {
    const fragment = document.createDocumentFragment(); // Fragment creation
    fragment.appendChild(this._player); // Append audio player to the fragment
    document.body.appendChild(fragment); // Append fragment to the document body
  }


  /**
   * @method
   * @name _getProgress
   * @private
   * @memberof Player
   * @author Arthur Beaulieu
   * @since July 2018
   * @description Compute and returns the current track progression in the player
   * @returns {number} The track progression in completion percentage in range [0, 100]
   **/
  _getProgress() {
    return Utils.precisionRound((this._player.currentTime * 100) / this._player.duration, 3) || 0; // Compute percentage from current time
  }


  /**
   * @method
   * @name _setProgress
   * @private
   * @memberof Player
   * @author Arthur Beaulieu
   * @since July 2018
   * @description Set progression percentage on current track
   * @param {number} percentage - The progression percentage in range [0, 100]
   **/
  _setProgress(percentage) {
    if (typeof percentage !== 'number') { // Bad format for value
      Errors.raise({
        code: 'INVALID_PROGRESS',
        frontend: true
      });
      return;
    }

    if (this._player.currentTime === 0) { // When player is stopped, currentTime = 0. We don't do anything
      return;
    }

    if (percentage &lt;= 0) { // Bound lower value
      percentage = 0;
    }

    if (percentage > 100) { // Bound upper value
      percentage = 100;
    }

    this._player.currentTime = (percentage * this._player.duration) / 100; // Apply percentage to total duration
  }


  /**
   * @method
   * @name _setVolume
   * @private
   * @memberof Player
   * @author Arthur Beaulieu
   * @since July 2018
   * @description Set the player volume according to the given value.
   * @param {number} value - The volume value to set in range [0, 1]
   **/
  _setVolume(value) {
    if (typeof value !== 'number') { // Bad format for value
      Errors.raise({
        code: 'INVALID_VOLUME',
        frontend: true
      });
      return;
    }

    if (value &lt;= 0) { // Bound lower value
      this.mute();
      this._volume = 0;
      return;
    }

    if (value > 1) { // Bound upper value
      value = 1;
    }

    if (this._isMuted) { // Restore mute state if needed
      this.unmute(); // Un mute playback
      this.setVolume(value); // Call again setVolume with previous value
      return;
    }

    this._player.volume = Utils.precisionRound(value, 2); // Assign new volume value (truncated with 2 decimals)
    this._volume = this._player.volume; // Store old volume value
  }


  /**
   * @method
   * @name _trackEnded
   * @private
   * @memberof Player
   * @author Arthur Beaulieu
   * @since July 2018
   * @description Action to take when the current track reaches its end
   **/
  _trackEnded() {
    this._isPlaying = false; // Update playling state
    mzk.trackEnded();
  }


  //  ----  PUBLIC METHODS  ----  //


  /**
   * @method
   * @name toggleMute
   * @public
   * @memberof Player
   * @author Arthur Beaulieu
   * @since July 2018
   * @description Toggle the mute status of the player
   **/
  toggleMute() {
    if (!this._isMuted) {
      this.mute();
    } else {
      this.unmute();
    }
  }


  /**
   * @method
   * @name togglePlay
   * @public
   * @memberof Player
   * @author Arthur Beaulieu
   * @since July 2018
   * @description Toggle the playback state of the player
   **/
  togglePlay() {
    if (!this._isPlaying) {
      this.play();
    } else {
      this.pause();
    }
  }


  /**
   * @method
   * @name adjustProgress
   * @public
   * @memberof Player
   * @author Arthur Beaulieu
   * @since July 2018
   * @description Add/Substract the amount (percentage) to the current progress (percentage)
   * @param {number} amount - Percentage value to adjust progress in range [0, 100]
   **/
  adjustProgress(amount) {
    this._setProgress(this._getProgress() + amount); // Inner call with current progression
  }


  /**
   * @method
   * @name adjustVolume
   * @public
   * @memberof Player
   * @author Arthur Beaulieu
   * @since July 2018
   * @description Add/Substract the amount to the current volume
   * @param {number} amount - Volume to add/substract in range [0, 1]
   **/
  adjustVolume(amount) {
    this._setVolume(this._volume + amount); // Inner call
  }


  /**
   * @method
   * @name changeTrack
   * @public
   * @memberof Player
   * @author Arthur Beaulieu
   * @since July 2018
   * @description Change the player source and start the playback once ready to play
   * @param {string} url - The path to the track (local or hosted)
   * @returns {Promise} A Promise that resolves when player is operating
   **/
  changeTrack(url) {
    return new Promise((resolve) => {
      if (typeof url !== 'string') { // Bad format value
        Errors.raise({
          code: 'INVALID_TRACK_URL',
          frontend: true
        });
        return;
      }

      const loadedListener = () => {
        this._player.removeEventListener('loadedmetadata', loadedListener); // Remove loaded track listener
        this.play(); // Call player play method (not actually play after that line)
        resolve(); // Resolve promise
      };

      if (this._isPlaying) { // Stop any previous playback
        this.stop();
      }

      this._player.src = url; // Set new track url
      this._player.addEventListener('loadedmetadata', loadedListener); // Add loaded track listener
    });
  }


  /**
   * @method
   * @name play
   * @public
   * @memberof Player
   * @author Arthur Beaulieu
   * @since July 2018
   * @description Swap playing state and start playback at currentTime
   **/
  play() {
    if (this._player.src) { // Apply only if src is defined
      this._isPlaying = true; // Set playing state to true
      this._player.play(); // Start player efective playback
    }
  }


  /**
   * @method
   * @name pause
   * @public
   * @memberof Player
   * @author Arthur Beaulieu
   * @since July 2018
   * @description Swap playing state and pause playback at currentTime
   **/
  pause() {
    if (this._player.src) { // Apply only if src is defined
      this._isPlaying = false; // Set playing state to false
      this._player.pause(); // Pause player playback
    }
  }


  /**
   * @method
   * @name stop
   * @public
   * @memberof Player
   * @author Arthur Beaulieu
   * @since July 2018
   * @description Stop playback and remove source from player attributes
   **/
  stop() {
    if (this._player.src) { // Apply only if src is defined
      this._player.pause(); // Pause player playback
      this._isPlaying = false; // Set playing state to false
      this._player.currentTime = 0;
      //this._player.duration = 0;
      this._player.removeAttribute('src'); // Remove src attribute from player (since this._player.src = null doesn't delete src)
    }
  }


  /**
   * @method
   * @name mute
   * @public
   * @memberof Player
   * @author Arthur Beaulieu
   * @since July 2018
   * @description Set player effective volume to zero
   **/
  mute() {
    if (!this._isMuted) { // Avoid multi call
      this._isMuted = true; // Set mute state to true
      this._player.volume = 0; // Mute audio player
    }
  }


  /**
   * @method
   * @name unmute
   * @public
   * @memberof Player
   * @author Arthur Beaulieu
   * @since July 2018
   * @description Restore player volume to previous its value
   **/
  unmute() {
    if (this._isMuted) { // Avoid multi call
      let volume = 0.5; // Prevent old volume value was zero, we need to restore at half, to avoid unmuting to volume = 0

      if (this._volume !== 0) { // Old volume != 0
        volume = this._volume; // We restore the previous volume otherwise
      }

      this._isMuted = false; // Set mute state to false
      this.setVolume(volume); // Restore old volume value
    }
  }


  /**
   * @method
   * @name repeatTrack
   * @public
   * @memberof Player
   * @author Arthur Beaulieu
   * @since July 2018
   * @description restart immediately the current track in the player
   **/
  repeatTrack() {
    if (this._player.src) { // Apply only if src is defined
      this._player.currentTime = 0; // Reset current time
      this.play(); // Start playback
    }
  }


  /**
   * @method
   * @name getSource
   * @public
   * @memberof Player
   * @author Arthur Beaulieu
   * @since October 2018
   * @description Returns the player current source url if existing, otherwise returns None
   * @returns {string} - The player current source url
   **/
  getSource() {
    let source = 'None';

    if (this._player.src !== null) {
      source = this._player.src;
    }

    return source;
  }


  /**
   * @method
   * @name hasSource
   * @public
   * @memberof Player
   * @author Arthur Beaulieu
   * @since October 2018
   * @description Check if player has a loaded track
   * @returns {boolean} - The presence of a source in player state
   **/
  hasSource() {
    let hasSource = false;

    if (this._player.src) {
      hasSource = true;
    }

    return hasSource;
  }


  //  ----  GETTER   ----  //


  getIsPlaying() {
    return this._isPlaying;
  }


  getIsMuted() {
    return this._isMuted;
  }


  getVolume() {
    return this._volume;
  }


  getProgress() {
    return this._getProgress();
  }


  getDuration() {
    return this._player.duration;
  }


  getCurrentTime() {
    return this._player.currentTime;
  }


  //  ----  SETTER   ----  //


  setProgress(percentage) {
    this._setProgress(percentage);
  }


  setVolume(value) {
    this._setVolume(value);
  }
}

export default Player;
</code></pre>
        </article>
    </section>




</div>

<footer>
    <img class="logo" src="https://manazeak.org/static/img/logo/manazeak-text.svg" style="width: auto; height: 13px">
    <div class="footer-text">&nbsp;&nbsp;ManaZeak is love</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = '_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>
